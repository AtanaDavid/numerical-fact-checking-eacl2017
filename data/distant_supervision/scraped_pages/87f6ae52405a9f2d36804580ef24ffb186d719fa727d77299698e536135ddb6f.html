<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"  xmlns:fb="https://www.facebook.com/2008/fbml"  xmlns:og="http://ogp.me/ns#" lang="en-US">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>  Map the Life Expectancy in United States with data from Wikipedia | DataScience+ </title>
<meta name="description" content="Recently, I become interested to grasp the data from webpages, such as Wikipedia, and to visualize it with R. As I did in my previous post, I use rvest package">
<!--facebook meta-->
<meta property="og:title" content="Map the Life Expectancy in United States with data from Wikipedia"/>
<meta property="og:description" content="Recently, I become interested to grasp the data from webpages, such as Wikipedia, and to visualize it with R. As I did in my previous post, I use rvest package to get the data from webpage and ggplot package to visualize the data. In this post, I will map the life expectancy in White and [&hellip;]" />
<meta property="og:url" content="http://datascienceplus.com/map-the-life-expectancy-in-united-states-with-data-from-wikipedia/"/>
<meta property="og:image" content="http://datascienceplus.com/wp-content/uploads/2016/08/life_expectancy_unites_states.png" />
<meta property="og:type" content="article"/>
<meta property="og:site_name" content="DataScience+"/>
<!--facebook meta end-->  
    
    <!-- json-->
 
<script type="application/ld+json">{"@context":"http:\/\/schema.org\/","@type":"Article","url":"http:\/\/datascienceplus.com\/map-the-life-expectancy-in-united-states-with-data-from-wikipedia\/","author":{"@type":"Person","name":"Klodian Dhana"},"headline":"Map the Life Expectancy in United States with data from Wikipedia","datePublished":"2016-08-05 20:48:53","image":"http:\/\/datascienceplus.com\/wp-content\/uploads\/2016\/08\/life_expectancy_unites_states.png","ArticleSection":"Visualizing Data","Publisher":"DataScience+"}</script>
    
<meta name="generator" content="WordPress 4.7" /> <!-- leave this for stats -->
<link rel="stylesheet" href="http://datascienceplus.com/wp-content/themes/ktheme/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="DataScience+ RSS Feed" href="http://datascienceplus.com/feed/" />
<link rel="pingback" href="http://datascienceplus.com/xmlrpc.php" />
<link rel="shortcut icon" href="http://datascienceplus.com/wp-content/themes/ktheme/favicon.png" />

<!-- new code -->
    <!--[if lt IE 7]> <html class="lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]> <html class="lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]> <html class="lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
<!--<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>-->
<link href='http://fonts.googleapis.com/css?family=Roboto+Mono:500' rel='stylesheet' type='text/css'>
    <meta name="google-site-verification" content="B-eCaNSWK8rUaW3PjTj9f4b1T9SHLSTBRj7tEIJNCSE" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!--[if lt IE 9]><script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>     
<link rel='dns-prefetch' href='//www.google.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="DataScience+ &raquo; Map the Life Expectancy in United States with data from Wikipedia Comments Feed" href="http://datascienceplus.com/map-the-life-expectancy-in-united-states-with-data-from-wikipedia/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/datascienceplus.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='validate-engine-css-css'  href='http://datascienceplus.com/wp-content/plugins/wysija-newsletters/css/validationEngine.jquery.css?ver=2.7.5' type='text/css' media='all' />
<link rel='stylesheet' id='theme-my-login-css'  href='http://datascienceplus.com/wp-content/plugins/theme-my-login/theme-my-login.css?ver=6.4.6' type='text/css' media='all' />
<link rel='stylesheet' id='contact-form-7-css'  href='http://datascienceplus.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.6' type='text/css' media='all' />
<link rel='stylesheet' id='ilmenite-cookie-consent-css'  href='http://datascienceplus.com/wp-content/plugins/ilmenite-cookie-consent/assets/css/cookie-banner.min.css?ver=0.2.9' type='text/css' media='all' />
<link rel='stylesheet' id='responsive-lightbox-swipebox-css'  href='http://datascienceplus.com/wp-content/plugins/responsive-lightbox/assets/swipebox/css/swipebox.min.css?ver=1.6.10' type='text/css' media='all' />
<link rel='stylesheet' id='wordpress-popular-posts-css'  href='http://datascienceplus.com/wp-content/themes/ktheme/wpp.css?ver=3.3.4' type='text/css' media='all' />
<script type='text/javascript' src='http://datascienceplus.com/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://datascienceplus.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='http://datascienceplus.com/wp-content/plugins/responsive-lightbox/assets/swipebox/js/jquery.swipebox.min.js?ver=1.6.10'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var rlArgs = {"script":"swipebox","selector":"lightbox","customEvents":"","activeGalleries":"1","animation":"1","hideCloseButtonOnMobile":"0","removeBarsOnMobile":"0","hideBars":"1","hideBarsDelay":"5000","videoMaxWidth":"1080","useSVG":"1","loopAtEnd":"0"};
/* ]]> */
</script>
<script type='text/javascript' src='http://datascienceplus.com/wp-content/plugins/responsive-lightbox/js/front.js?ver=1.6.10'></script>
<script type='text/javascript' src='https://www.google.com/recaptcha/api.js?hl=en-US&#038;ver=4.7'></script>
<link rel='https://api.w.org/' href='http://datascienceplus.com/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://datascienceplus.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://datascienceplus.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.7" />
<link rel="canonical" href="http://datascienceplus.com/map-the-life-expectancy-in-united-states-with-data-from-wikipedia/" />
<link rel='shortlink' href='http://datascienceplus.com/?p=4428' />
<link rel="alternate" type="application/json+oembed" href="http://datascienceplus.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fdatascienceplus.com%2Fmap-the-life-expectancy-in-united-states-with-data-from-wikipedia%2F" />
<link rel="alternate" type="text/xml+oembed" href="http://datascienceplus.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fdatascienceplus.com%2Fmap-the-life-expectancy-in-united-states-with-data-from-wikipedia%2F&#038;format=xml" />
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
						<!-- WordPress Popular Posts v3.3.4 -->
				<script type="text/javascript">

					var sampling_active = 0;
					var sampling_rate   = 100;
					var do_request = false;

					if ( !sampling_active ) {
						do_request = true;
					} else {
						var num = Math.floor(Math.random() * sampling_rate) + 1;
						do_request = ( 1 === num );
					}

					if ( do_request ) {

						/* Create XMLHttpRequest object and set variables */
						var xhr = ( window.XMLHttpRequest )
						  ? new XMLHttpRequest()
						  : new ActiveXObject( "Microsoft.XMLHTTP" ),
						url = 'http://datascienceplus.com/wp-admin/admin-ajax.php',
						params = 'action=update_views_ajax&token=81149f3d83&wpp_id=4428';
						/* Set request method and target URL */
						xhr.open( "POST", url, true );
						/* Set request header */
						xhr.setRequestHeader( "Content-type", "application/x-www-form-urlencoded" );
						/* Hook into onreadystatechange */
						xhr.onreadystatechange = function() {
							if ( 4 === xhr.readyState && 200 === xhr.status ) {
								if ( window.console && window.console.log ) {
									window.console.log( xhr.responseText );
								}
							}
						};
						/* Send request */
						xhr.send( params );

					}

				</script>
				<!-- End WordPress Popular Posts v3.3.4 -->
				<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(51,51,51,.88);}</style></head>
<body> 
    <!-- facebook -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=444382375763644";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
    
<!-- share count in single -->
<script type="text/javascript">
 jQuery(function() {
 url = window.location.href;
 jQuery.getJSON("http://datascienceplus.com/wp-content/themes/ktheme/include/socialworth.php", { url: url }, function(data) {
 jQuery("#totalshare").html(data.count);
 });
 return false;
 });
</script>
    
<!-- end share -->
    
<div id="wrapper">
    <!--     <div class="partner-single-main"><div class="partner-single-fixed"><a href="http://datacamp.com" target="_blank"><img class="partners-single" alt="DataCamp" title="DataCamp - Start a Free Course" src="http://datascienceplus.com/wp-content/themes/ktheme/images/partners/datacamp729.png"></a></div></div>
     -->
<!-- start logo and menu -->
<div id="header-wrapper">
<div class="header-in">
<div class="logo"><a href="http://datascienceplus.com"><div class="grid">
 <img width="71" height="30" alt="DataScience+" src="http://datascienceplus.com/wp-content/themes/ktheme/images/logot.png"/>
<span class="caption"></span>
</div></a>
<p>Learn R programming for data science</p>
</div>
<div class="menu">
<ul>
<li><a rel="nofollow" href="http://datascienceplus.com" title="Home">Home</a></li>
<li><a href="/about-us/" rel="nofollow" title="About Us">About Us</a></li>
<li><a href="/archives/" rel="nofollow" title="Archives">Archives</a></li>
<li><a href="/write-for-us/" rel="nofollow" title="Contribute">Contribute</a></li>
<li><a class="adminuserlink" href="/register/" rel="nofollow" title="Create a Free Account">Free Account</a></li>
 <li><form role="search" method="get" class="search-form" action="http://datascienceplus.com/">
				<label>
					<input type="text" 
                class="search-field" 
                placeholder="Search"  
                value="" name="s" 
                title="Search efter:">
				</label>
				<input type="submit" class="search-submit" value="Search">
     </form></li>
</ul>
</div>
    <div class="clear"></div>
</div>
</div>
<!-- start welcome message -->

<div id="welcome-wrapper-single">
<div class="welcome-fixed">
<div class="welcome-text-single">
    <span class="welcome-single"><img height="38" width="292" src="http://datascienceplus.com/wp-content/themes/ktheme/images/logoh.png" ALT="DataScience+" title="DataScience+"/></span> 
    <span class="welcome-single-small">We share R tutorials from scientists at academic and scientific institutions with a goal to give everyone in the world access to a free knowledge. Our tutorials cover different topics including statistics, data manipulation and visualization!</span>
    </div></div></div>
    

    
        
    <!-- start content -->
<div id="content-wrapper">
<div class="content-fixed">
<div class="sidebar-left">
<div class="list-group">
<a class="list-group-item" href="/category/introduction/"><i class="fa fa-file-code-o fa-fw"></i> Introduction</a>
<a class="list-group-item" href="/category/getting-data/"><i class="fa fa-database fa-fw"></i> Getting Data</a>
<a class="list-group-item" href="/category/data-management"><i class="fa fa-table fa-fw"></i> Data Management</a>
<a class="list-group-item" href="/category/visualizing-data"><i class="fa fa-bar-chart fa-fw"></i> Visualizing Data</a>
<a class="list-group-item" href="/category/basic-statistics"><i class="fa fa-calculator fa-fw"></i> Basic Statistics</a>
<a class="list-group-item" href="/category/regression-models"><i class="fa fa-adjust fa-fw"></i> Regression Models</a>
<a class="list-group-item" href="/category/advanced-modeling"><i class="fa fa-tasks fa-fw"></i> Advanced Modeling</a>
<a class="list-group-item" href="/category/programming"><i class="fa fa fa-anchor fa-fw"></i></i> Programming</a>
<a class="list-group-item" href="/tag/best-r-packages"><i class="fa fa-star fa-fw"></i> Best R Packages</a>
<a class="list-group-item" href="/tag/tips-tricks"><i class="fa fa-shield fa-fw"></i> Tips &amp; Tricks</a>
</div> 



    



</div>

<!-- start content -->
<div class="page-single-top">
<div class="page-single">
<div class="post-single">
<div class="category-single-cat">Visualizing Data</div>
<h1 class="post_title">Map the Life Expectancy in United States with data from Wikipedia</h1>
<div class="author-date-comment"><span class="author_name">by <a href="http://datascienceplus.com/author/klodian/" title="Posts by Klodian Dhana" rel="author">Klodian Dhana</a></span> <span class="date_page">on August 5, 2016</span><span class="comment_page"><i class="fa fa-commenting-o"></i> <a href="http://datascienceplus.com/map-the-life-expectancy-in-united-states-with-data-from-wikipedia/#comments"><span class="dsq-postid" data-dsqidentifier="4428 http://datascienceplus.com/?p=4428">1 Comment</span></a></span>
					</span></div>

        
<div class="entry-single">
				<p>Recently, I become interested to grasp the data from webpages, such as Wikipedia, and to visualize it with R. As I did in my <a href="http://datascienceplus.com/visualizing-obesity-across-united-states-by-using-data-from-wikipedia/" target="_blank">previous post</a>, I use <code>rvest</code> package to get the data from webpage and <code>ggplot</code> package to visualize the data.</p>
<p>In this post, I will map the life expectancy in White and African-American in US.</p>
<p>Load the required packages.</p>
<pre>
## LOAD THE PACKAGES ####
library(rvest)
library(ggplot2)
library(dplyr)
library(scales)</pre>
<p>Import the data from Wikipedia.</p>
<pre>
## LOAD THE DATA ####
le = read_html("https://en.wikipedia.org/wiki/List_of_U.S._states_by_life_expectancy")

le = le %>%
  html_nodes("table") %>%
  .[[2]]%>%
  html_table(fill=T)</pre>
<p>Now I have to clean the data. Below I have explain the role of each code.</p>
<pre>
## CLEAN THE DATA ####
# check the structure of dataset
str(le)<em>
'data.frame':	54 obs. of  417 variables:
 $ X1  : chr  "" "Rank\nState\nLife Expectancy, All\n(in years)\nLife Expectancy, African American\n(in years)\nLife Expectancy, Asian American\n"| __truncated__ "Rank" "1" ...
 $ X2  : chr  NA "Rank" "State" "Hawaii" ...
 $ X3  : chr  NA "State" "Life Expectancy, All\n(in years)" "81.3" ...
 $ X4  : chr  NA "Life Expectancy, All\n(in years)" "Life Expectancy, African American\n(in years)" "-" ...
 $ X5  : chr  NA "Life Expectancy, African American\n(in years)" "Life Expectancy, Asian American\n(in years)" "82.0" ...
 $ X6  : chr  NA "Life Expectancy, Asian American\n(in years)" "Life Expectancy, Latino\n(in years)" "76.8" ...
 $ X7  : chr  NA "Life Expectancy, Latino\n(in years)" "Life Expectancy, Native American\n(in years)" "-" ...
.....
.....</em>

# select only columns with data
le = le[c(1:8)]

# get the names from 3rd row and add to columns
names(le) = le[3,]

# delete rows and columns which I am not interested
le = le[-c(1:3), ]
le = le[, -c(5:7)]

# rename the names of 4th and 5th column
names(le)[c(4,5)] = c("le_black", "le_white")

# make variables as numeric
le = le %>% 
  mutate(
    le_black = as.numeric(le_black), 
    le_white = as.numeric(le_white))

# check the structure of dataset
str(le)
<em>'data.frame':	51 obs. of  7 variables:
 $ Rank                            : chr  "1" "2" "3" "4" ...
 $ State                           : chr  "Hawaii" "Minnesota" "Connecticut" "California" ...
 $ Life Expectancy, All
(in years): chr  "81.3" "81.1" "80.8" "80.8" ...
 $ le_black                        : num  NA 79.7 77.8 75.1 78.8 77.4 NA NA 75.5 NA ...
 $ le_white                        : num  80.4 81.2 81 79.8 80.4 80.5 80.4 80.1 80.3 80.1 ...
 $ le_diff                         : num  NA 1.5 3.2 4.7 1.6 ...
 $ region                          : chr  "hawaii" "minnesota" "connecticut" "california" ...</em>
</pre>
<p>Since there are some differences in life expectancy between White and African-American, I will calculate the differences and will map it.</p>
<pre>
le = le %>% mutate(le_diff = (le_white - le_black))</pre>
<p>I will load the map data and will merge the datasets togather.</p>
<pre>## LOAD THE MAP DATA ####
states = map_data("state")
str(states)
<em>'data.frame':	15537 obs. of  6 variables:
 $ long     : num  -87.5 -87.5 -87.5 -87.5 -87.6 ...
 $ lat      : num  30.4 30.4 30.4 30.3 30.3 ...
 $ group    : num  1 1 1 1 1 1 1 1 1 1 ...
 $ order    : int  1 2 3 4 5 6 7 8 9 10 ...
 $ region   : chr  "alabama" "alabama" "alabama" "alabama" ...
 $ subregion: chr  NA NA NA NA ...</em>

# create a new variable name for state
le$region = tolower(le$State)

# merge the datasets
states = merge(states, le, by="region", all.x=T)
str(states)
<em>'data.frame':	15537 obs. of  12 variables:
 $ region                          : chr  "alabama" "alabama" "alabama" "alabama" ...
 $ long                            : num  -87.5 -87.5 -87.5 -87.5 -87.6 ...
 $ lat                             : num  30.4 30.4 30.4 30.3 30.3 ...
 $ group                           : num  1 1 1 1 1 1 1 1 1 1 ...
 $ order                           : int  1 2 3 4 5 6 7 8 9 10 ...
 $ subregion                       : chr  NA NA NA NA ...
 $ Rank                            : chr  "49" "49" "49" "49" ...
 $ State                           : chr  "Alabama" "Alabama" "Alabama" "Alabama" ...
 $ Life Expectancy, All
(in years): chr  "75.4" "75.4" "75.4" "75.4" ...
 $ le_black                        : num  72.9 72.9 72.9 72.9 72.9 72.9 72.9 72.9 72.9 72.9 ...
 $ le_white                        : num  76 76 76 76 76 76 76 76 76 76 ...
 $ le_diff                         : num  3.1 3.1 3.1 3.1 3.1 ...</em></pre>
<p>Now its time to make the plot. First I will plot the life expectancy in African-American in US. For few states we don&#8217;t have the data, and therefore I will color it in grey color.</p>
<pre>## MAKE THE PLOT ####

# Life expectancy in African American
ggplot(states, aes(x = long, y = lat, group = group, fill = le_black)) + 
  geom_polygon(color = "white") +
  scale_fill_gradient(name = "Years", low = "#ffe8ee", high = "#c81f49", guide = "colorbar", na.value="#eeeeee", breaks = pretty_breaks(n = 5)) +
  labs(title="Life expectancy in African American") +
  coord_map()
</pre>
<p>Here is the plot:<br />
<a href="http://datascienceplus.com/wp-content/uploads/2016/08/Le_african_american.png" data-rel="lightbox-0" title=""><img src="http://datascienceplus.com/wp-content/uploads/2016/08/Le_african_american-490x463.png" alt="Le_african_american" width="490" height="463" class="alignnone size-medium wp-image-4432" srcset="http://datascienceplus.com/wp-content/uploads/2016/08/Le_african_american-490x463.png 490w, http://datascienceplus.com/wp-content/uploads/2016/08/Le_african_american-768x726.png 768w, http://datascienceplus.com/wp-content/uploads/2016/08/Le_african_american-600x567.png 600w, http://datascienceplus.com/wp-content/uploads/2016/08/Le_african_american-300x284.png 300w, http://datascienceplus.com/wp-content/uploads/2016/08/Le_african_american.png 800w" sizes="(max-width: 490px) 100vw, 490px" /></a></p>
<p>The code below is for White people in US.</p>
<pre>
# Life expectancy in White American
ggplot(states, aes(x = long, y = lat, group = group, fill = le_white)) + 
  geom_polygon(color = "white") +
  scale_fill_gradient(name = "Years", low = "#ffe8ee", high = "#c81f49", guide = "colorbar", na.value="Gray", breaks = pretty_breaks(n = 5)) +
  labs(title="Life expectancy in White") +
  coord_map()</pre>
<p>Here is the plot:<br />
<a href="http://datascienceplus.com/wp-content/uploads/2016/08/Le_white.png" data-rel="lightbox-1" title=""><img src="http://datascienceplus.com/wp-content/uploads/2016/08/Le_white-490x463.png" alt="Le_white" width="490" height="463" class="alignnone size-medium wp-image-4430" srcset="http://datascienceplus.com/wp-content/uploads/2016/08/Le_white-490x463.png 490w, http://datascienceplus.com/wp-content/uploads/2016/08/Le_white-768x726.png 768w, http://datascienceplus.com/wp-content/uploads/2016/08/Le_white-600x567.png 600w, http://datascienceplus.com/wp-content/uploads/2016/08/Le_white-300x284.png 300w, http://datascienceplus.com/wp-content/uploads/2016/08/Le_white.png 800w" sizes="(max-width: 490px) 100vw, 490px" /></a></p>
<p>Finally, I will map the differences between white and African American people in US.</p>
<pre>
# Differences in Life expectancy between White and African American
ggplot(states, aes(x = long, y = lat, group = group, fill = le_diff)) + 
  geom_polygon(color = "white") +
  scale_fill_gradient(name = "Years", low = "#ffe8ee", high = "#c81f49", guide = "colorbar", na.value="#eeeeee", breaks = pretty_breaks(n = 5)) +
  labs(title="Differences in Life Expectancy between \nWhite and African Americans by States in US") +
  coord_map()</pre>
<p>Here is the plot:<br />
<a href="http://datascienceplus.com/wp-content/uploads/2016/08/Le_differences.png" data-rel="lightbox-2" title=""><img src="http://datascienceplus.com/wp-content/uploads/2016/08/Le_differences-490x463.png" alt="Le_differences" width="490" height="463" class="alignnone size-medium wp-image-4431" srcset="http://datascienceplus.com/wp-content/uploads/2016/08/Le_differences-490x463.png 490w, http://datascienceplus.com/wp-content/uploads/2016/08/Le_differences-768x726.png 768w, http://datascienceplus.com/wp-content/uploads/2016/08/Le_differences-600x567.png 600w, http://datascienceplus.com/wp-content/uploads/2016/08/Le_differences-300x284.png 300w, http://datascienceplus.com/wp-content/uploads/2016/08/Le_differences.png 800w" sizes="(max-width: 490px) 100vw, 490px" /></a></p>
<p>On my <a href="http://datascienceplus.com/visualizing-obesity-across-united-states-by-using-data-from-wikipedia/" target="_blank">previous post</a> I got a comment to add the pop-up effect as I hover over the states. This is a simple task as <a href="http://datascienceplus.com/author/andreacirilloac/" target="_blank">Andrea</a> exmplained in his comment. What you have to do is to install the <code>plotly</code> package, to create a object for ggplot, and then to use this function <code>ggplotly(map_plot)</code> to plot it.</p>
<pre>
library(plotly)
map_plot = ggplot(states, aes(x = long, y = lat, group = group, fill = le_black)) + 
  geom_polygon(color = "white") +
  scale_fill_gradient(name = "Years", low = "#ffe8ee", high = "#c81f49", guide = "colorbar", na.value="#eeeeee", breaks = pretty_breaks(n = 5)) +
  labs(title="Life expectancy in African American") +
  coord_map()
ggplotly(map_plot)</pre>
<p>Here is the plot:<br />
<a href="http://datascienceplus.com/wp-content/uploads/2016/08/le_plotly.png" data-rel="lightbox-3" title=""><img src="http://datascienceplus.com/wp-content/uploads/2016/08/le_plotly-490x429.png" alt="le_plotly" width="490" height="429" class="alignnone size-medium wp-image-4438" srcset="http://datascienceplus.com/wp-content/uploads/2016/08/le_plotly-490x429.png 490w, http://datascienceplus.com/wp-content/uploads/2016/08/le_plotly-768x672.png 768w, http://datascienceplus.com/wp-content/uploads/2016/08/le_plotly-600x525.png 600w, http://datascienceplus.com/wp-content/uploads/2016/08/le_plotly-300x263.png 300w, http://datascienceplus.com/wp-content/uploads/2016/08/le_plotly.png 800w" sizes="(max-width: 490px) 100vw, 490px" /></a></p>
<p>Thats all! Leave a comment below if you have any question.</p>
            </div>
    <div class="single-tags"><i class="fa fa-tags"></i> Tags <span><a href="http://datascienceplus.com/tag/best-r-packages/">Best R Packages</a></span><span><a href="http://datascienceplus.com/tag/ggplot2/">ggplot2</a></span><span><a href="http://datascienceplus.com/tag/rvest/">rvest</a></span><span><a href="http://datascienceplus.com/tag/webscraping/">Webscraping</a></span></div> 
</div></div>


	
	

		        <div id="sidebar-single">
<div class="authoruser">The Author</div>       
<div class="about-author">
<span class="about-author-pic"><img alt='' src='http://2.gravatar.com/avatar/298bf653fee5ddb150d19add6d6d7f5b?s=60&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/298bf653fee5ddb150d19add6d6d7f5b?s=120&amp;d=mm&amp;r=g 2x' class='avatar avatar-60 photo' height='60' width='60' /></span>
<span class="about-author-des">Klodian is the founder of DataScience+, Postdoctoral Fellow in the Harvard T.H. Chan School of Public Health in Boston (MA), with passion for medical research and data science. Strong interest to discover and to develop novel methods for analysis of medical data from a wide range of diseases.</span>

<div class="about-author-soc">
<span><a href="https://nl.linkedin.com/pub/klodian-dhana/48/126/783" target="_blank" rel="nofollow"><i class="fa fa-linkedin fa-fw"></i>  LinkedIn</a></span><span><a href="http://twitter.com/datascienceplus" target="_blank" rel="nofollow"><i class="fa fa-twitter fa-fw"></i> Twitter</a></span>

</div>
            
            </div>
            <h3>Disclosure</h3>  
       <ul><li>Klodian Dhana
does not work or receive funding from any company or organization that would benefit from this article.    </li>
            </ul><div class="sidebar-single-end"><a href="http://datascienceplus.com/write-for-us/" target="_blank"><img alt="DataScience+" title="Become an Author at DataScience+" src="http://datascienceplus.com/wp-content/themes/ktheme/images/partners/datascience260.jpg"></a></div>
        
       
</div>
        

<div id="sidebar">
    
    
    
</div>



    



    </div><div class="clear"></div></div></div>

<div id="share-wrapper">
<div class="share-fixed">
    <div class="totalshares"><div id="totalshare">0</div> <span>Shares</span></div>
<div class="social-share-links">
    <h5>Like this article? Give it a share:</h5>
    <div class="share-links">
    <div class="share-links-script">    
    <span><!--fb-->
       <a target="_blank" href="http://www.facebook.com/sharer.php?u=http://datascienceplus.com/map-the-life-expectancy-in-united-states-with-data-from-wikipedia/" title="Share this post on Facebook!"><i class="fa fa-facebook"></i> Facebook</a></span>
    <span><!--twitter-->
       <a target="_blank" href="http://twitter.com/intent/tweet?text=Map+the+Life+Expectancy+in+United+States+with+data+from+Wikipedia%20http://datascienceplus.com/map-the-life-expectancy-in-united-states-with-data-from-wikipedia/%20%23rstats%20via%20@datascienceplus" title="Share this post on Twitter!"><i class="fa fa-twitter"></i> Twitter</a></span>
<span><!--g+-->
       <a target="_blank" href="https://plus.google.com/share?url=http://datascienceplus.com/map-the-life-expectancy-in-united-states-with-data-from-wikipedia/" title="Share this post on Google Plus!"><i class="fa fa-google-plus"></i> Google+</a></span>

<span><!--linkedin-->
    <a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&url=http://datascienceplus.com/map-the-life-expectancy-in-united-states-with-data-from-wikipedia/&title=&source=LinkedIn" title="Share this post on Linkedin!"><i class="fa fa-linkedin"></i> Linkedin</a></span>

<span class="email-share"><!--Email-->
    <a title="Share by email" href="mailto:?subject=Check this post on DataSciencePlus&amp;body= Map the Life Expectancy in United States with data from Wikipedia - http://datascienceplus.com/map-the-life-expectancy-in-united-states-with-data-from-wikipedia/"><i class="fa fa-envelope-o"></i> Email this</a></span>
    </div></div>
    <div class="comment-in">

<div id="disqus_thread">
            <div id="dsq-content">


            <ul id="dsq-comments">
                    <li class="comment even thread-even depth-1" id="dsq-comment-560">
        <div id="dsq-comment-header-560" class="dsq-comment-header">
            <cite id="dsq-cite-560">
                <span id="dsq-author-user-560">Hans Thompson</span>
            </cite>
        </div>
        <div id="dsq-comment-body-560" class="dsq-comment-body">
            <div id="dsq-comment-message-560" class="dsq-comment-message"><p>no Alaska or Hawaii? 🙁</p>
</div>
        </div>

    </li><!-- #comment-## -->
            </ul>


        </div>

    </div>

</div>
    </div>
<div class="popular-post-single"><h3>Trending Now on DataScience+</h3>
<!-- WordPress Popular Posts Plugin v3.3.4 [PHP] [weekly] [views] [custom] -->

<ul class="wpp-list">
<li><a href="http://datascienceplus.com/outlier-detection-and-treatment-with-r/" title="Outlier detection and treatment with R" target="_self"><img src="http://datascienceplus.com/wp-content/uploads/wordpress-popular-posts/4935-featured-70x50.png" width="70" height="50" title="Outlier detection and treatment with R" alt="Outlier detection and treatment with R" class="wpp-thumbnail wpp_cached_thumb wpp_featured" /></a> <a href="http://datascienceplus.com/outlier-detection-and-treatment-with-r/" title="Outlier detection and treatment with R" class="wpp-post-title" target="_self">Outlier detection and treatment with R</a> </li>
<li><a href="http://datascienceplus.com/perform-logistic-regression-in-r/" title="How to Perform a Logistic Regression in R" target="_self"><img src="http://datascienceplus.com/wp-content/uploads/wordpress-popular-posts/1087-featured-70x50.png" width="70" height="50" title="How to Perform a Logistic Regression in R" alt="How to Perform a Logistic Regression in R" class="wpp-thumbnail wpp_cached_thumb wpp_featured" /></a> <a href="http://datascienceplus.com/perform-logistic-regression-in-r/" title="How to Perform a Logistic Regression in R" class="wpp-post-title" target="_self">How to Perform a Logistic Regression in R</a> </li>
<li><a href="http://datascienceplus.com/k-means-clustering-in-r/" title="K Means Clustering in R" target="_self"><img src="http://datascienceplus.com/wp-content/uploads/wordpress-popular-posts/2525-featured-70x50.png" width="70" height="50" title="K Means Clustering in R" alt="K Means Clustering in R" class="wpp-thumbnail wpp_cached_thumb wpp_featured" /></a> <a href="http://datascienceplus.com/k-means-clustering-in-r/" title="K Means Clustering in R" class="wpp-post-title" target="_self">K Means Clustering in R</a> </li>
<li><a href="http://datascienceplus.com/extracting-tables-from-pdfs-in-r-using-the-tabulizer-package/" title="Extracting Tables from PDFs in R using the Tabulizer Package" target="_self"><img src="http://datascienceplus.com/wp-content/uploads/wordpress-popular-posts/4915-featured-70x50.png" width="70" height="50" title="Extracting Tables from PDFs in R using the Tabulizer Package" alt="Extracting Tables from PDFs in R using the Tabulizer Package" class="wpp-thumbnail wpp_cached_thumb wpp_featured" /></a> <a href="http://datascienceplus.com/extracting-tables-from-pdfs-in-r-using-the-tabulizer-package/" title="Extracting Tables from PDFs in R using the Tabulizer Package" class="wpp-post-title" target="_self">Extracting Tables from PDFs in R using the Tabulizer Package</a> </li>
<li><a href="http://datascienceplus.com/fitting-neural-network-in-r/" title="Fitting a Neural Network in R; neuralnet package" target="_self"><img src="http://datascienceplus.com/wp-content/uploads/wordpress-popular-posts/1201-featured-70x50.png" width="70" height="50" title="Fitting a Neural Network in R; neuralnet package" alt="Fitting a Neural Network in R; neuralnet package" class="wpp-thumbnail wpp_cached_thumb wpp_featured" /></a> <a href="http://datascienceplus.com/fitting-neural-network-in-r/" title="Fitting a Neural Network in R; neuralnet package" class="wpp-post-title" target="_self">Fitting a Neural Network in R; neuralnet package</a> </li>

</ul>

<!-- End WordPress Popular Posts Plugin v3.3.4 -->
 </div>    
<div class="clear"></div>
</div></div>




<div id="footer-wrapper">
<div id="footer">
<div class="page-footer-header">

    <div class="page-footer-title">
	<img height="28" src="http://datascienceplus.com/wp-content/themes/ktheme/images/logot.png" ALT="Data Science Plus" title="DataScience+"/><div class="page-footer-brand-text">DataScience+<span>Learn R programming for data science</span></div>
<div class="dsp-stats"><a href="http://datascienceplus.com/dsp/" title="DataScience+ Statistics" target="_blank" rel="nofollow"><i class="fa fa-rocket"></i></a></div>
</div>
    
    
<div class="page-footer-sitelinks"><i class="fa fa-terminal"></i> Site Links
    <ul>
    <li><a href="/about-us/">About Us</a></li>
    <li><a href="/write-for-us/">Contribute</a></li>
    <li><a href="/contact-us/" rel="nofollow">Advertise</a></li>
    <li><a href="/contact-us/">Contact Us</a></li>
    </ul>
    </div>

<div class="page-footer-sitelinks"><i class="fa fa-terminal"></i> Legal
    <ul>
    <li><a href="/privacy-policy/">Privacy Policy</a></li>
    <li><a href="/terms-conditions/">Terms of Use</a></li>
    <li><a href="/account-terms/">Account Terms</a></li>
    <li><a href="/editorial-stylebook/">Stylebook</a></li>

    </ul>
	
    </div>
    
<div class="page-footer-sitelinks"><i class="fa fa-terminal"></i> Other Sites
    <ul>
    <li><a href="https://r-bloggers.com" target="_blank">R Bloggers</a></li>
    </ul>
	
    </div>

<div class="post-count">
    <ul>
<li><a href="https://www.facebook.com/datascienceplus" title="Facebook"><i class="fa fa-facebook-official fa-lg"></i></a></li>
<li><a href="http://twitter.com/datascienceplus" title="Twitter"><i class="fa fa-twitter fa-lg"></i></a></li>
<li><a href="https://www.linkedin.com/company/10203574" title="LinkedIn"><i class="fa fa-linkedin fa-lg"></i></a></li>
<li><a href="http://feeds.feedburner.com/datascienceplus" title="Subscribe"><i class="fa fa fa-rss fa-lg"></i></a></li>
</ul>
	<span>Connect with Us</span>
    </div>

</div>
    <div class="copyright">&copy; 2016 DataSciencePlus.com</div><span class="wplogo"><i class="fa fa-wordpress"></i></span>

    <div class="clear"></div>
</div>
</div>

<!-- Powered by WPtouch: 4.3.9 --><script type='text/javascript' src='http://datascienceplus.com/wp-content/plugins/contact-form-7/includes/js/jquery.form.min.js?ver=3.51.0-2014.06.20'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var _wpcf7 = {"recaptcha":{"messages":{"empty":"Please verify that you are not a robot."}},"cached":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='http://datascienceplus.com/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=4.6'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var ilcc = {"cookieConsentText":"<span>This website uses cookies to enhance the browsing experience. <\/span>By continuing you give us permission to deploy cookies as per our <a href=\"http:\/\/datascienceplus.com\/privacy-policy\/\" rel=\"nofollow\">privacy and cookies policy<\/a>.","acceptText":"I Understand"};
/* ]]> */
</script>
<script type='text/javascript' src='http://datascienceplus.com/wp-content/plugins/ilmenite-cookie-consent/assets/js/cookie-banner.min.js?ver=0.2.9'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"http:\/\/datascienceplus.com\/wp-admin\/admin-ajax.php","post_id":"4428"};
/* ]]> */
</script>
<script type='text/javascript' src='http://datascienceplus.com/wp-content/plugins/wp-postviews/postviews-cache.js?ver=1.68'></script>
<script type='text/javascript' src='http://datascienceplus.com/wp-includes/js/wp-embed.min.js?ver=4.7'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var embedVars = {"disqusConfig":{"platform":"wordpress@4.7","language":""},"disqusIdentifier":"4428 http:\/\/datascienceplus.com\/?p=4428","disqusShortname":"datascienceplus","disqusTitle":"Map the Life Expectancy in United States with data from Wikipedia","disqusUrl":"http:\/\/datascienceplus.com\/map-the-life-expectancy-in-united-states-with-data-from-wikipedia\/","options":{"manualSync":false},"postId":"4428"};
/* ]]> */
</script>
<script type='text/javascript' src='http://datascienceplus.com/wp-content/plugins/disqus-comment-system/media/js/disqus.js?ver=4.7'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var countVars = {"disqusShortname":"datascienceplus"};
/* ]]> */
</script>
<script type='text/javascript' src='http://datascienceplus.com/wp-content/plugins/disqus-comment-system/media/js/count.js?ver=4.7'></script>
</div>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=10536245; 
var sc_invisible=1; 
var sc_security="9679d40c"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<!-- End of StatCounter Code for Default Guide -->     
<!-- social share pop-up -->
 <script>jQuery(document).ready(function($) {
	var social_link = $('.share-links-script a:not(.email-share a)');
    social_link.live('click', function(){
        newwindow=window.open($(this).attr('href'),'','height=450,width=550');
        if (window.focus) {newwindow.focus()}
        return false;
    });
});</script>
<!-- end social share pop-up -->

</body></html>
<!-- Dynamic page generated in 0.541 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2016-12-14 08:18:35 -->

<!-- super cache -->